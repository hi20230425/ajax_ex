<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
	<title> 08_post 요청하기 : parameter 값을 서버로 전송 : DTO로 값을 받기 -JSON 으로 값을 넘길경우: List에 dto저장후 전송  </title>
</head>
<body>
	
	<h1> 08_post 요청하기 : parameter 값을 서버로 전송 : DTO로 값을 받기 -JSON 으로 값을 넘길경우: List에 dto저장후 전송  </h1>
	<button onclick = "ex08Fn()"> ex08 함수 호출   </button>
	
	<script type = "text/javascript">
		const ex08Fn = () => {
			//console.log("함수 호출 성공"); 
			//alert ("함수호출 성공") ; 
			
			// 서버와 동기 통신 : 서버에서 전체 페이지가 랜더링되어서 client 로 전송 , 페이지가 리프레쉬됨
			// 서버와 비동기 통신  : client 의 특정 부분만 변경
			var val1 = "Hello Ajax : 08"
			 
			 // JavaScript 객체 타입 
			 const params = {param1 : val1, 
			 				param2 : "안녕"
			 }
			 
			 		 
			$.ajax({
				
				url : "/ajax/ex08",     // 서버에게 요청을 보내는 URL 
				type : "post",           // 서버에게 요을을 보내는 방식 : get, post
					//data : 서버로 전송할 data 
				data : JSON.stringify(params) , 
				contentType: "application/json",
				
				success: function (res) {   // 요청이 성공되었을때 서버에서 보내는 값을 받음
											// res : 서버에서 보내는 값을 할당 받음 
					console.log ("서버와 통신 성공 : " + res); 
					console.log ("첫 번째 객체 : " + res[0].param1); 
					console.log ("첫 번째 객체 : " + res[0].param2); 
					console.log ("두 번째 객체 : " + res[1].param1); 
					console.log ("두 번째 객체 : " + res[1].param2); 
					console.log ("세 번째 객체 : " + res[2].param1); 
					console.log ("세 번째 객체 : " + res[2].param2); 
					
					console.log ("======For 문을 사용해서 출력 ==============")
					for (let i in res){
						console.log(res[i].param1); 
						console.log(res[i].param2); 
										
					}
										
				},
				error : function () {     //서버와 통신이 실패 했을때 작동됨 
					cosole.log ("서버와 통신 실패"); 
					alert ("서버와 통신 실패 "); 
				} 			
				
			}); 
			
		}
			
	</script>
	

</body>
</html>